<!DOCTYPE html>
<html lang="zh-CN">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>安装 Toot Anywhere</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css"
    integrity="sha256-wLz3iY/cO4e6vKZ4zRmo4+9XDpMcgKOvv/zEU3OMlRo=" crossorigin="anonymous">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"
    integrity="sha256-lSABj6XYH05NydBq+1dvkMu6uiCc/MbLYOFGRkf3iQs=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/alpinejs@3.10.5/dist/cdn.min.js"
    integrity="sha256-WwJCbnSfvEmZ1kBwg0Y7m8tVEfBz9BMkmlbiFkO7a9g=" crossorigin="anonymous" defer></script>
</head>

<body>

  <div class="container mt-2" id="main">
    <div id="install-box" x-data="alpine()">
      <h1>安装信息</h1>
      <hr>
      <form action="/setup" method="POST" @submit="check">
        <h3>密码管理</h3>
        <div class="form-group mb-2">
          <label for="inputPassword">设置密码</label>
          <input type="password" class="form-control" id="inputPassword" name="password" x-model="password">
        </div>
        <div class="form-group mb-2">
          <label for="inputRepeatePassword">重复密码</label>
          <input type="password" class="form-control" id="inputRepeatePassword" name="repeated" x-model="repeatedPass">
        </div>

        <h4>Mastodon 配置</h4>
        <div class="form-group mb-2">
          <label for="inputInstance">实例网址</label>
          <input type="text" class="form-control" id="inputInstance" name="instance" x-model="instance">
        </div>
        <div class="form-group mb-2">
          <label for="inputAccessToken">AccessToken</label>
          <input type="text" class="form-control" id="inputAccessToken" name="accesstoken" x-model="token">
        </div>
        <button type="submit" class="btn btn-primary">完成设置</button>
      </form>
    </div>
    <script>
      function alpine() {
        return {
          password: '',
          repeatedPass: '',
          instance: '',
          token: '',
          check: function (e) {
            if (this.password !== this.repeatedPass) {
              alert('两次密码不一致');
              e.preventDefault();
            }
            if (!Boolean(this.instance)) {
              alert('实例地址不能为空');
              e.preventDefault();
            }
            if (!Boolean(this.token)) {
              alert('AccessToken不能为空');
              e.preventDefault();
            }
          }
        }
      }
    </script>
  </div>
</body>

</html>